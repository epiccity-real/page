<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bohncity Schule - Klasse 5</title>
    <style>
        /* Grundlegende Stildefinitionen */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            padding: 20px;
            width: 100%;
        }

        /* Header Bereich */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            color: #2d3748;
            margin-bottom: 10px;
        }

        .bean-logo {
            font-size: 3rem;
            margin-bottom: 10px;
            display: inline-block;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.8);
            padding: 10px 20px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
        }

        /* Navigationsleiste */
        .navigation {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            margin-bottom: 30px;
            padding: 10px 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-button {
            background: none;
            border: none;
            padding: 10px 20px;
            font-size: 1.1rem;
            font-weight: bold;
            color: #718096;
            cursor: pointer;
            transition: all 0.3s ease;
            border-radius: 15px;
        }

        .nav-button:hover {
            color: #4a5568;
            background: #edf2f7;
        }

        .nav-button.active {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        /* Fächerübersicht (Grid) */
        .subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .subject-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
            border-left: 5px solid;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .subject-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        /* Fachspezifische Randfarben */
        .subject-card.math { border-left-color: #3182ce; }
        .subject-card.german { border-left-color: #38a169; }
        .subject-card.english { border-left-color: #e53e3e; }
        .subject-card.science { border-left-color: #805ad5; }
        .subject-card.geography { border-left-color: #319795; }
        .subject-card.history { border-left-color: #d69e2e; }

        .subject-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            display: block;
        }

        .subject-title {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 10px;
            color: #2d3748;
        }

        .subject-description {
            color: #718096;
            margin-bottom: 20px;
            line-height: 1.5;
            flex-grow: 1;
        }

        /* Allgemeine Button-Stile */
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Ansichten (Fach, Quiz, Arbeitsblätter) */
        .topic-view, .quiz-container, .worksheets-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .back-btn {
            background: #718096;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background 0.3s ease;
        }

        .back-btn:hover {
            background: #4a5568;
        }

        .topics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .topic-card {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .topic-card:hover {
            border-color: #667eea;
            background: #edf2f7;
            transform: translateY(-2px);
        }

        .topic-card h3 {
            font-size: 1.2rem;
            margin-bottom: 5px;
            color: #2d3748;
        }

        .topic-card p {
            font-size: 0.9rem;
            color: #718096;
        }

        /* Quiz Ansicht */
        .quiz-container {
            text-align: center;
        }

        .quiz-progress {
            font-size: 0.95rem;
            color: #718096;
            margin-bottom: 15px;
            text-align: left;
            padding-left: 10px;
        }

        .question-card {
            background: #f7fafc;
            border-radius: 15px;
            padding: 25px;
            margin: 20px auto;
            font-size: 1.3rem;
            line-height: 1.6;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .answer-input {
            width: 100%;
            max-width: 400px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1.1rem;
            margin: 20px auto;
            text-align: center;
            display: block;
        }

        .answer-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .feedback {
            padding: 15px;
            border-radius: 10px;
            margin: 20px auto;
            font-weight: bold;
            max-width: 400px;
            text-align: center;
            transition: all 0.3s ease-out;
            opacity: 0;
            transform: translateY(10px);
            font-size: 1rem;
        }

        .feedback.show {
            opacity: 1;
            transform: translateY(0);
        }

        .feedback.correct {
            background: #c6f6d5;
            color: #22543d;
            border: 2px solid #68d391;
        }

        .feedback.incorrect {
            background: #fed7d7;
            color: #742a2a;
            border: 2px solid #fc8181;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            background: #f7fafc;
            padding: 15px;
            border-radius: 15px;
            box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.05);
            flex-wrap: wrap;
            gap: 10px;
        }

        .game-stat {
            text-align: center;
            padding: 5px 10px;
        }

        .game-stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
        }

        .game-stat-label {
            color: #718096;
            font-size: 0.9rem;
        }

        /* Hilfsklassen */
        .hidden {
            display: none !important; /* !important, um Überschreiben zu verhindern */
        }

        .pulse {
            animation: pulse 0.5s ease-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1;}
            50% { transform: scale(1.1); opacity: 0.8;}
            100% { transform: scale(1); opacity: 1;}
        }

        .celebration {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            z-index: 1000;
            animation: celebrate 1s ease-out forwards;
            pointer-events: none;
            opacity: 0;
        }

        @keyframes celebrate {
            0% { transform: translate(-50%, -50%) scale(0) rotate(0deg); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2) rotate(180deg); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1) rotate(360deg); opacity: 0; }
        }

        /* Ende Quiz Bildschirm */
        .quiz-end-screen {
            text-align: center;
            padding: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        .quiz-end-screen h2 {
            color: #2d3748;
            font-size: 2.2rem;
            margin-bottom: 20px;
        }

        .quiz-end-screen p {
            font-size: 1.1rem;
            color: #4a5568;
            margin-bottom: 15px;
        }

        .quiz-end-screen .btn-group {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 300px;
            margin: 0 auto;
        }

        /* Arbeitsblätter Ansicht */
        .worksheets-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .worksheet-card {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .worksheet-card:hover {
            border-color: #667eea;
            background: #edf2f7;
            transform: translateY(-2px);
        }

        .worksheet-card .worksheet-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .worksheet-card h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #2d3748;
        }

        .worksheet-card p {
            color: #718096;
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .worksheet-card .btn {
            width: auto;
            padding: 10px 20px;
        }

        /* Responsive Anpassungen */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .subjects-grid, .worksheets-list {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .stats {
                flex-direction: column;
                gap: 10px;
            }

            .stat-item {
                width: 100%;
                justify-content: center;
            }

            .navigation {
                flex-direction: column;
                gap: 10px;
                padding: 10px;
            }

            .nav-button {
                width: 100%;
            }

            .topic-view, .quiz-container, .worksheets-container {
                padding: 20px;
            }

            .question-card {
                font-size: 1.1rem;
                padding: 20px;
            }

            .answer-input {
                padding: 12px;
                font-size: 1rem;
            }

            .btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="bean-logo">🫘</div>
            <h1>Bohncity Schule</h1>
            <p>Klasse 5 - Interaktive Lernplattform</p>
            <div class="stats">
                <div class="stat-item">
                    <span>🏆</span>
                    <span>Punkte: <span id="totalScore">0</span></span>
                </div>
                <div class="stat-item">
                    <span>⚡</span>
                    <span>Streak: <span id="totalStreak">0</span></span>
                </div>
                <div class="stat-item">
                    <span>📚</span>
                    <span>Fächer: 6</span>
                </div>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-button active" id="nav-subjects" onclick="showHomeView('subjects')">Fächer</button>
            <button class="nav-button" id="nav-worksheets" onclick="showHomeView('worksheets')">Arbeitsblätter</button>
        </div>

        <div id="home-subjects-view">
            <div class="subjects-grid">
                <div class="subject-card math" onclick="openSubject('math')">
                    <div class="subject-icon">🔢</div>
                    <div class="subject-title">Mathematik</div>
                    <div class="subject-description">Rechnen mit natürlichen Zahlen, Geometrie & Brüche</div>
                    <button class="btn">Starten</button>
                </div>
                
                <div class="subject-card german" onclick="openSubject('german')">
                    <div class="subject-icon">📚</div>
                    <div class="subject-title">Deutsch</div>
                    <div class="subject-description">Wortarten, Satzglieder & Rechtschreibung</div>
                    <button class="btn">Starten</button>
                </div>
                
                <div class="subject-card english" onclick="openSubject('english')">
                    <div class="subject-icon">🇬🇧</div>
                    <div class="subject-title">Englisch</div>
                    <div class="subject-description">Grundwortschatz & Simple Present</div>
                    <button class="btn">Starten</button>
                </div>
                
                <div class="subject-card science" onclick="openSubject('science')">
                    <div class="subject-icon">🔬</div>
                    <div class="subject-title">Natur & Technik</div>
                    <div class="subject-description">Körper, Tiere & Stromkreise</div>
                    <button class="btn">Starten</button>
                </div>
                
                <div class="subject-card geography" onclick="openSubject('geography')">
                    <div class="subject-icon">🌍</div>
                    <div class="subject-title">Geographie</div>
                    <div class="subject-description">Kontinente, Deutschland & Karten lesen</div>
                    <button class="btn">Starten</button>
                </div>
                
                <div class="subject-card history" onclick="openSubject('history')">
                    <div class="subject-icon">📜</div>
                    <div class="subject-title">Geschichte</div>
                    <div class="subject-description">Römer, Ägypter & Mittelalter</div>
                    <button class="btn">Starten</button>
                </div>
            </div>
        </div>

        <div id="home-worksheets-view" class="hidden">
            <div class="worksheets-container">
                <h2>Verfügbare Arbeitsblätter</h2>
                <p>Hier kannst du dir passende Arbeitsblätter herunterladen, um dein Wissen zu festigen.</p>
                <div class="worksheets-list" id="worksheets-list-container">
                    </div>
            </div>
        </div>

        <div id="subject-view" class="hidden">
            <button class="back-btn" onclick="showHomeView('subjects')">
                ← Zurück zur Fächerübersicht
            </button>
            <div class="topic-view">
                <h2 id="subject-title"></h2>
                <p id="subject-description"></p>
                <div class="topics-grid" id="topics-container"></div>
            </div>
        </div>

        <div id="quiz-view" class="hidden">
            <button class="back-btn" onclick="goToSubject()">
                ← Zurück zu den Themen
            </button>
            <div class="quiz-container">
                <h2 id="quiz-title"></h2>
                <div class="game-stats">
                    <div class="game-stat">
                        <div class="game-stat-value" id="current-score">0</div>
                        <div class="game-stat-label">Punkte</div>
                    </div>
                    <div class="game-stat">
                        <div class="game-stat-value" id="current-streak">0</div>
                        <div class="game-stat-label">Streak</div>
                    </div>
                    <div class="game-stat">
                        <div class="game-stat-value" id="time-left">60</div>
                        <div class="game-stat-label">Zeit</div>
                    </div>
                </div>
                
                <div class="quiz-progress" id="quiz-progress-text"></div>
                
                <div class="question-card" id="question-container">
                    <div id="question-text">Bereit für deine erste Aufgabe?</div>
                </div>
                
                <input type="text" class="answer-input" id="answer-input" placeholder="Deine Antwort...">
                
                <div class="feedback" id="feedback"></div>
                
                <button class="btn" id="submit-btn" onclick="checkAnswer()">Antwort prüfen</button>
                <button class="btn hidden" id="next-btn" onclick="nextQuestion()">Nächste Frage</button>
                <button class="btn" id="start-btn" onclick="startQuiz()">Quiz starten</button>

                <div id="quiz-end-screen" class="quiz-end-screen hidden">
                    <h2>Quiz beendet!</h2>
                    <p>Du hast <span id="final-score">0</span> Punkte erreicht.</p>
                    <p>Richtig beantwortete Fragen: <span id="final-correct-answers">0</span> von <span id="final-total-questions">0</span></p>
                    <div class="btn-group">
                        <button class="btn" onclick="startQuiz()">Nochmal spielen</button>
                        <button class="btn" style="background: #718096;" onclick="goToSubject()">Zurück zum Thema</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentSubject = null;
        let currentTopic = null;
        let score = 0;
        let streak = 0;
        let totalScore = parseInt(localStorage.getItem('totalScore') || '0');
        let totalStreak = parseInt(localStorage.getItem('totalStreak') || '0');
        let timeLeft = 60;
        let gameActive = false;
        let currentQuestion = null;
        let timer = null;
        let totalQuestionsAttempted = 0; // Fragen, die im aktuellen Quiz gestellt wurden
        let correctAnswersCount = 0; // Richtige Antworten im aktuellen Quiz
        let questionsForQuiz = []; // Fragen für das aktuelle Quiz
        let questionIndex = 0; // Aktueller Index der Frage im Quiz

        // --- HIER PASST DU DEINE VERFÜGBAREN ARBEITSBLÄTTER AN! ---
        // Füge hier Einträge für JEDES PDF hinzu, das du in deinem Ordner hast.
        // Der Code generiert dann automatisch die Karte dafür.
        const availableWorksheets = [
            { fileName: 'deutsch_wortarten.pdf', title: 'Deutsch - Wortarten', description: 'Arbeitsblatt zum Erkennen und Bestimmen von Nomen, Verben und Adjektiven.' },
            { fileName: 'mathe.pdf', title: 'Mathematik - Allgemeine Übungen', description: 'Ein umfassendes Übungsblatt für verschiedene mathematische Themen.' },
            { fileName: 'english_vocabulary.pdf', title: 'Englisch - Basic Vocabulary', description: 'Übe grundlegende englische Wörter und Sätze für den Alltag.' },
            { fileName: 'natur_menschlicher_koerper.pdf', title: 'Natur & Technik - Der menschliche Körper', description: 'Entdecke die wichtigsten Organe und Funktionen deines Körpers.' },
            { fileName: 'geographie_deutschland.pdf', title: 'Geographie - Deutschland Bundesländer', description: 'Lerne die 16 Bundesländer Deutschlands und ihre Hauptstädte kennen.' },
            { fileName: 'geschichte_aegypten.pdf', title: 'Geschichte - Das Alte Ägypten', description: 'Reise zurück zu den Pharaonen, Pyramiden und dem Nil.' },
            // Beispiel für weitere PDFs, die du hinzufügen könntest:
            // { fileName: 'mathe_addition.pdf', title: 'Mathematik - Addition & Subtraktion', description: 'Übungsblatt zu den Grundrechenarten im Zahlenraum bis 1000.' },
            // { fileName: 'deutsch_satzzeichen.pdf', title: 'Deutsch - Satzzeichen', description: 'Übe den korrekten Einsatz von Punkt, Komma und Fragezeichen.' },
            // { fileName: 'english_simple_present.pdf', title: 'Englisch - Simple Present', description: 'Übungsblatt zur Bildung und Anwendung des Simple Present.' },
            // ... und so weiter für alle anderen, die du noch erstellen möchtest.
        ];


        // Datenstrukturen für Fächer, Themen und Fragen
        // Fragen wurden mit zusätzlichen Erklärungen versehen, um besseres Feedback zu ermöglichen
        const subjects = {
            math: {
                name: 'Mathematik',
                icon: '🔢',
                description: 'Rechnen mit natürlichen Zahlen, Geometrie & Brüche',
                topics: [
                    { id: 'addition', name: 'Addition & Subtraktion', description: 'Grundrechenarten üben' },
                    { id: 'multiplication', name: 'Multiplikation & Division', description: 'Einmaleins und Teilen' },
                    { id: 'fractions', name: 'Brüche', description: 'Einführung in Brüche' },
                    { id: 'geometry', name: 'Geometrie', description: 'Formen und Flächen' },
                    { id: 'units', name: 'Maßeinheiten', description: 'Längen, Gewichte, Zeit' },
                    { id: 'word_problems', name: 'Sachaufgaben', description: 'Mathematik im Alltag' }
                ]
            },
            german: {
                name: 'Deutsch',
                icon: '📚',
                description: 'Sprache, Rechtschreibung und Texte verstehen',
                topics: [
                    { id: 'word_types', name: 'Wortarten', description: 'Nomen, Verben, Adjektive' },
                    { id: 'sentence_parts', name: 'Satzglieder', description: 'Subjekt, Prädikat, Objekt' },
                    { id: 'tenses', name: 'Zeitformen', description: 'Präsens, Präteritum, Perfekt' },
                    { id: 'spelling', name: 'Rechtschreibung', description: 'Richtig schreiben' },
                    { id: 'texts', name: 'Texte schreiben', description: 'Beschreibungen und Berichte' },
                    { id: 'reading', name: 'Lesen & Verstehen', description: 'Texte erfassen' }
                ]
            },
            english: {
                name: 'Englisch',
                icon: '🇬🇧',
                description: 'Grundlagen der englischen Sprache',
                topics: [
                    { id: 'vocabulary', name: 'Grundwortschatz', description: 'Familie, Schule, Freizeit' },
                    { id: 'simple_present', name: 'Simple Present', description: 'Gegenwart auf Englisch' },
                    { id: 'pronouns', name: 'Pronomen', description: 'I, you, he, she, it' },
                    { id: 'questions', name: 'Fragen stellen', description: 'What, where, when, why' },
                    { id: 'conversations', name: 'Gespräche', description: 'Begrüßung und Small Talk' },
                    { id: 'writing', name: 'Texte schreiben', description: 'Kurze Texte verfassen' }
                ]
            },
            science: {
                name: 'Natur & Technik',
                icon: '🔬',
                description: 'Forschen und die Welt verstehen',
                topics: [
                    { id: 'senses', name: 'Sinne', description: 'Sehen, Hören, Riechen, Schmecken' },
                    { id: 'body', name: 'Menschlicher Körper', description: 'Bewegung und Gesundheit' },
                    { id: 'animals', name: 'Tiere', description: 'Lebensräume und Verhalten' },
                    { id: 'plants', name: 'Pflanzen', description: 'Wachstum und Photosynthese' },
                    { id: 'electricity', name: 'Strom', description: 'Stromkreise und Geräte' },
                    { id: 'environment', name: 'Umwelt', description: 'Nachhaltigkeit und Schutz' }
                ]
            },
            geography: {
                name: 'Geographie',
                icon: '🌍',
                description: 'Die Welt entdecken und verstehen',
                topics: [
                    { id: 'directions', name: 'Himmelsrichtungen', description: 'Norden, Süden, Osten, Westen' },
                    { id: 'continents', name: 'Kontinente', description: 'Europa, Asien, Afrika...' },
                    { id: 'germany', name: 'Deutschland', description: 'Bundesländer und Gebirge' },
                    { id: 'maps', name: 'Karten lesen', description: 'Orientierung und Maßstab' },
                    { id: 'climate', name: 'Klima', description: 'Wetter und Klimazonen' },
                    { id: 'cities', name: 'Städte & Länder', description: 'Hauptstädte Europas' }
                ]
            },
            history: {
                name: 'Geschichte',
                icon: '📜',
                description: 'Reise in die Vergangenheit',
                topics: [
                    { id: 'timeline', name: 'Zeitrechnung', description: 'v. Chr. und n. Chr.' },
                    { id: 'egypt', name: 'Altes Ägypten', description: 'Pharaonen und Pyramiden' },
                    { id: 'greece', name: 'Griechenland', description: 'Demokratie und Götter' },
                    { id: 'rome', name: 'Römisches Reich', description: 'Gladiatoren und Legionen' },
                    { id: 'medieval', name: 'Mittelalter', description: 'Ritter und Burgen' },
                    { id: 'sources', name: 'Quellen', description: 'Wie erforscht man Geschichte?' }
                ]
            }
        };

        const questions = {
            math: {
                addition: [
                    { question: "Was ist 25 + 17?", answer: "42", explanation: "Die Summe ist 42." },
                    { question: "Was ist 84 - 29?", answer: "55", explanation: "Die Differenz ist 55." },
                    { question: "Was ist 156 + 78?", answer: "234", explanation: "Addiere die Zahlen, um 234 zu erhalten." },
                    { question: "Was ist 200 - 85?", answer: "115", explanation: "Subtrahiere, um 115 zu bekommen." },
                    { question: "Was ist 47 + 38?", answer: "85", explanation: "47 + 38 ergibt 85." },
                    { question: "Was ist 123 - 67?", answer: "56", explanation: "123 minus 67 ist 56." },
                    { question: "Was ist 33 + 44?", answer: "77", explanation: "Die Summe von 33 und 44 ist 77." },
                    { question: "Was ist 91 - 19?", answer: "72", explanation: "Die Differenz ist 72." },
                    { question: "Was ist 500 + 250?", answer: "750", explanation: "Halbiere 500 und addiere es zu 500." },
                    { question: "Was ist 1000 - 333?", answer: "667", explanation: "Rechne 1000 minus 333." }
                ],
                multiplication: [
                    { question: "Was ist 7 × 8?", answer: "56", explanation: "7 mal 8 ist 56." },
                    { question: "Was ist 9 × 6?", answer: "54", explanation: "9 mal 6 ist 54." },
                    { question: "Was ist 72 ÷ 8?", answer: "9", explanation: "72 geteilt durch 8 ist 9." },
                    { question: "Was ist 45 ÷ 5?", answer: "9", explanation: "45 geteilt durch 5 ist 9." },
                    { question: "Was ist 8 × 7?", answer: "56", explanation: "Die Produkt von 8 und 7 ist 56." },
                    { question: "Was ist 63 ÷ 9?", answer: "7", explanation: "63 geteilt durch 9 ist 7." },
                    { question: "Was ist 11 × 11?", answer: "121", explanation: "11 mal 11 ist 121." },
                    { question: "Was ist 12 × 12?", answer: "144", explanation: "12 mal 12 ist 144." },
                    { question: "Was ist 100 ÷ 10?", answer: "10", explanation: "100 geteilt durch 10 ist 10." },
                    { question: "Was ist 81 ÷ 9?", answer: "9", explanation: "81 geteilt durch 9 ist 9." }
                ],
                fractions: [
                    { question: "Was ist 1/2 + 1/4?", answer: "3/4", explanation: "1/2 sind 2/4. Also 2/4 + 1/4 = 3/4." },
                    { question: "Was ist größer: 1/3 oder 1/4?", answer: "1/3", explanation: "Je kleiner der Nenner, desto größer der Bruch (wenn Zähler gleich ist)." },
                    { question: "Was ist 1/2 von 8?", answer: "4", explanation: "Die Hälfte von 8 ist 4." },
                    { question: "Was ist 1/4 von 12?", answer: "3", explanation: "Ein Viertel von 12 ist 3." },
                    { question: "Wie schreibt man eine halbe Pizza als Bruch?", answer: "1/2", explanation: "Eine halbe Pizza ist 1/2." },
                    { question: "Wie viele Viertel sind ein Ganzes?", answer: "4", explanation: "Vier Viertel ergeben ein Ganzes (4/4)." }
                ],
                geometry: [
                    { question: "Wie viele Ecken hat ein Dreieck?", answer: "3", explanation: "Ein Dreieck hat drei Ecken." },
                    { question: "Wie viele Seiten hat ein Rechteck?", answer: "4", explanation: "Ein Rechteck hat vier Seiten." },
                    { question: "Wie heißt ein Viereck mit 4 gleichen Seiten?", answer: "quadrat", explanation: "Ein Quadrat hat vier gleiche Seiten und vier rechte Winkel." },
                    { question: "Wie viele Ecken hat ein Kreis?", answer: "0", explanation: "Ein Kreis hat keine Ecken." },
                    { question: "Welche Form hat eine Tafel Schokolade?", answer: "rechteck", explanation: "Viele Tafeln Schokolade sind rechteckig." },
                    { question: "Wie nennt man eine Figur mit 5 Ecken?", answer: "fünfeck", explanation: "Eine Figur mit 5 Ecken ist ein Fünfeck oder Pentagon." }
                ],
                units: [
                    { question: "Wie viele Zentimeter sind 1 Meter?", answer: "100", explanation: "1 Meter entspricht 100 Zentimetern." },
                    { question: "Wie viele Minuten sind 1 Stunde?", answer: "60", explanation: "Eine Stunde hat 60 Minuten." },
                    { question: "Wie viele Gramm sind 1 Kilogramm?", answer: "1000", explanation: "Ein Kilogramm sind 1000 Gramm." },
                    { question: "Wie viele Sekunden sind 1 Minute?", answer: "60", explanation: "Eine Minute hat 60 Sekunden." },
                    { question: "Wie viele Tage hat ein Schaltjahr?", answer: "366", explanation: "Ein Schaltjahr hat einen zusätzlichen Tag im Februar (366 statt 365)." },
                    { question: "Wie viele Milliliter sind 1 Liter?", answer: "1000", explanation: "Ein Liter sind 1000 Milliliter." }
                ],
                word_problems: [
                    { question: "Lisa hat 15 Äpfel. Sie gibt 7 weg. Wie viele bleiben?", answer: "8", explanation: "15 minus 7 ergibt 8." },
                    { question: "In einer Klasse sind 12 Jungen und 13 Mädchen. Wie viele Kinder insgesamt?", answer: "25", explanation: "12 plus 13 ergibt 25." },
                    { question: "Ein Buch kostet 8 Euro. Wie viel kosten 3 Bücher?", answer: "24", explanation: "3 mal 8 Euro sind 24 Euro." },
                    { question: "24 Bonbons werden gleichmäßig auf 6 Kinder verteilt. Wie viele bekommt jedes?", answer: "4", explanation: "24 geteilt durch 6 ist 4." },
                    { question: "Ein Bäcker backt 100 Brötchen. 45 werden verkauft. Wie viele sind übrig?", answer: "55", explanation: "100 minus 45 ergibt 55." },
                    { question: "Ein Zug fährt mit 60 km/h. Wie weit fährt er in 2 Stunden?", answer: "120", explanation: "60 km/h mal 2 Stunden sind 120 km." }
                ]
            },
            german: {
                word_types: [
                    { question: "Welche Wortart ist 'Hund'?", answer: "nomen", explanation: "Hund ist ein Nomen (Hauptwort), da man 'der Hund' sagen kann." },
                    { question: "Welche Wortart ist 'laufen'?", answer: "verb", explanation: "Laufen ist ein Verb (Tunwort), es beschreibt eine Tätigkeit." },
                    { question: "Welche Wortart ist 'schön'?", answer: "adjektiv", explanation: "Schön ist ein Adjektiv (Eigenschaftswort), es beschreibt, wie etwas ist." },
                    { question: "Welche Wortart ist 'schnell'?", answer: "adjektiv", explanation: "Schnell ist ein Adjektiv, es beschreibt eine Eigenschaft." },
                    { question: "Welche Wortart ist 'spielen'?", answer: "verb", explanation: "Spielen ist ein Verb, da es eine Handlung beschreibt." },
                    { question: "Welche Wortart ist 'Baum'?", answer: "nomen", explanation: "Baum ist ein Nomen, da es ein Ding benennt." },
                    { question: "Welche Wortart ist 'grün'?", answer: "adjektiv", explanation: "Grün ist ein Adjektiv, es beschreibt eine Farbe." },
                    { question: "Welche Wortart ist 'lesen'?", answer: "verb", explanation: "Lesen ist ein Verb, da es eine Tätigkeit ausdrückt." }
                ],
                sentence_parts: [
                    { question: "Was ist das Subjekt im Satz: 'Der Hund bellt'?", answer: "der hund", explanation: "Das Subjekt ist 'Der Hund', denn 'Wer oder was bellt?' -> 'Der Hund'." },
                    { question: "Was ist das Prädikat im Satz: 'Maria singt'?", answer: "singt", explanation: "Das Prädikat ist 'singt', es ist das Verb im Satz." },
                    { question: "Was fragt man nach dem Subjekt?", answer: "wer oder was", explanation: "Nach dem Subjekt fragt man 'Wer oder was?'." },
                    { question: "Was fragt man nach dem Akkusativ-Objekt?", answer: "wen oder was", explanation: "Nach dem Akkusativ-Objekt fragt man 'Wen oder was?'." },
                    { question: "Was ist der Nominativ?", answer: "wer oder was", explanation: "Der Nominativ ist der 1. Fall ('Wer oder was?')." },
                    { question: "Was ist der Dativ?", answer: "wem", explanation: "Der Dativ ist der 3. Fall ('Wem?')." },
                ],
                tenses: [
                    { question: "In welcher Zeitform steht: 'Ich gehe'?", answer: "präsens", explanation: "Das ist Präsens (Gegenwart)." },
                    { question: "In welcher Zeitform steht: 'Ich ging'?", answer: "präteritum", explanation: "Das ist Präteritum (Vergangenheit), auch einfache Vergangenheit genannt." },
                    { question: "Wie heißt die Vergangenheitsform von 'spielen'?", answer: "spielte", explanation: "Die Präteritum-Form von 'spielen' ist 'spielte'." },
                    { question: "Wie heißt die Grundform von 'läuft'?", answer: "laufen", explanation: "Die Grundform (Infinitiv) von 'läuft' ist 'laufen'." },
                    { question: "Wie heißt die Perfektform von 'essen'?", answer: "gegessen", explanation: "Die Perfektform ist 'hat gegessen'." },
                    { question: "Nenne ein Signalwort für Präsens.", answer: "jetzt", explanation: "Signalwörter für Präsens sind z.B. 'jetzt', 'immer', 'oft'." }
                ],
                spelling: [
                    { question: "Schreibe richtig: 'Das ist ein shöner Tag'", answer: "das ist ein schöner tag", explanation: "Der Buchstabe 'sch' wird verwendet." },
                    { question: "Schreibe richtig: 'Ich gehe ins Kino'", answer: "ich gehe ins kino", explanation: "Nomen werden großgeschrieben, also 'Kino'." },
                    { question: "Wie schreibt man: 'Ich bin glüklich'?", answer: "ich bin glücklich", explanation: "'Glücklich' wird mit 'ck' geschrieben." },
                    { question: "Wie schreibt man: 'Das Mädhen spielt'?", answer: "das mädchen spielt", explanation: "'Mädchen' wird mit 'ch' geschrieben." },
                    { question: "Wie schreibt man 'Fahrrad' richtig?", answer: "fahrrad", explanation: "'Fahrrad' hat zwei 'r'." },
                    { question: "Wie viele 's' hat das Wort 'Wasser'?", answer: "2", explanation: "'Wasser' hat zwei 's'." }
                ],
                texts: [
                    { question: "Womit beginnt ein Satz?", answer: "großbuchstabe", explanation: "Ein Satz beginnt immer mit einem Großbuchstaben." },
                    { question: "Womit endet ein Aussagesatz?", answer: "punkt", explanation: "Ein Aussagesatz endet mit einem Punkt." },
                    { question: "Womit endet ein Fragesatz?", answer: "fragezeichen", explanation: "Ein Fragesatz endet mit einem Fragezeichen." },
                    { question: "Wie nennt man eine Geschichte über sich selbst?", answer: "erzählung", explanation: "Eine Geschichte über sich selbst ist eine Erzählung oder Autobiografie." },
                    { question: "Was ist eine Überschrift?", answer: "titel", explanation: "Eine Überschrift ist der Titel oder die Bezeichnung eines Textes." },
                    { question: "Was sind Absätze in einem Text?", answer: "textteile", explanation: "Absätze sind Gliederungen, die den Text in Sinnabschnitte unterteilen." }
                ],
                reading: [
                    { question: "Wer ist der Hauptcharakter in einem Text?", answer: "protagonist", explanation: "Der Hauptcharakter wird auch Protagonist genannt." },
                    { question: "Wie nennt man den Anfang einer Geschichte?", answer: "einleitung", explanation: "Der Anfang einer Geschichte ist die Einleitung." },
                    { question: "Was beschreibt die Handlung einer Geschichte?", answer: "plot", explanation: "Der Plot beschreibt die Abfolge der Ereignisse." },
                    { question: "Wie nennt man das Ende einer Geschichte?", answer: "schluss", explanation: "Das Ende einer Geschichte ist der Schluss oder die Auflösung." },
                    { question: "Was ist eine Textsorte?", answer: "art des textes", explanation: "Eine Textsorte ist eine bestimmte Art von Text (z.B. Märchen, Bericht, Gedicht)." },
                    { question: "Was ist die Kernaussage eines Textes?", answer: "hauptbotschaft", explanation: "Die Kernaussage ist die wichtigste Information oder Botschaft des Textes." }
                ]
            },
            english: {
                vocabulary: [
                    { question: "Wie heißt 'Hund' auf Englisch?", answer: "dog", explanation: "Hund ist 'dog'." },
                    { question: "Wie heißt 'Katze' auf Englisch?", answer: "cat", explanation: "Katze ist 'cat'." },
                    { question: "Wie heißt 'Haus' auf Englisch?", answer: "house", explanation: "Haus ist 'house'." },
                    { question: "Wie heißt 'Schule' auf Englisch?", answer: "school", explanation: "Schule ist 'school'." },
                    { question: "Wie heißt 'Buch' auf Englisch?", answer: "book", explanation: "Buch ist 'book'." },
                    { question: "Wie heißt 'Auto' auf Englisch?", answer: "car", explanation: "Auto ist 'car'." },
                    { question: "Wie heißt 'Apfel' auf Englisch?", answer: "apple", explanation: "Apfel ist 'apple'." },
                    { question: "Wie heißt 'Wasser' auf Englisch?", answer: "water", explanation: "Wasser ist 'water'." }
                ],
                simple_present: [
                    { question: "He ___ to school every day. (go)", answer: "goes", explanation: "Bei 'he/she/it' wird ein '-s' an das Verb angehängt." },
                    { question: "She ___ her homework. (do)", answer: "does", explanation: "'Do' wird zu 'does' bei 'he/she/it'." },
                    { question: "I ___ English. (speak)", answer: "speak", explanation: "Bei 'I/you/we/they' bleibt das Verb in der Grundform." },
                    { question: "We ___ football. (play)", answer: "play", explanation: "Die Grundform 'play' ist korrekt für 'we'." },
                    { question: "The cat ___ milk. (drink)", answer: "drinks", explanation: "'The cat' ist wie 'it', also 'drinks'." },
                    { question: "They ___ happy. (be)", answer: "are", explanation: "'To be' wird zu 'are' bei 'they'." },
                    { question: "The sun ___ in the east. (rise)", answer: "rises", explanation: "'The sun' ist wie 'it', also 'rises'." }
                ],
                pronouns: [
                    { question: "Welches Pronomen steht für 'ich'?", answer: "i", explanation: "'Ich' auf Englisch ist 'I'." },
                    { question: "Welches Pronomen steht für 'du'?", answer: "you", explanation: "'Du' auf Englisch ist 'you'." },
                    { question: "Welches Pronomen steht für 'er'?", answer: "he", explanation: "'Er' auf Englisch ist 'he'." },
                    { question: "Welches Pronomen steht für 'sie' (weiblich)?", answer: "she", explanation: "'Sie' (weiblich) auf Englisch ist 'she'." },
                    { question: "Welches Pronomen steht für 'wir'?", answer: "we", explanation: "'Wir' auf Englisch ist 'we'." },
                    { question: "Welches Pronomen steht für 'es' (Sachen/Tiere)?", answer: "it", explanation: "'Es' für Sachen oder Tiere ist 'it'." },
                    { question: "Welches Pronomen steht für 'sie' (Plural)?", answer: "they", explanation: "'Sie' (Plural, für Personen oder Dinge) ist 'they'." }
                ],
                questions: [
                    { question: "Mit welchem Wort fragt man nach dem Ort?", answer: "where", explanation: "'Where' bedeutet 'wo'." },
                    { question: "Mit welchem Wort fragt man nach der Zeit?", answer: "when", explanation: "'When' bedeutet 'wann'." },
                    { question: "Mit welchem Wort fragt man nach dem Grund?", answer: "why", explanation: "'Why' bedeutet 'warum'." },
                    { question: "Mit welchem Wort fragt man nach einer Sache?", answer: "what", explanation: "'What' bedeutet 'was'." },
                    { question: "Mit welchem Wort fragt man nach einer Person?", answer: "who", explanation: "'Who' bedeutet 'wer'." },
                    { question: "Mit welchem Wort fragt man nach der Art und Weise?", answer: "how", explanation: "'How' bedeutet 'wie'." }
                ],
                conversations: [
                    { question: "Wie sagt man 'Hallo' auf Englisch?", answer: "hello", explanation: "'Hello' ist eine gängige Begrüßung." },
                    { question: "Wie sagt man 'Auf Wiedersehen' auf Englisch?", answer: "goodbye", explanation: "'Goodbye' bedeutet 'Auf Wiedersehen'." },
                    { question: "Wie sagt man 'Danke' auf Englisch?", answer: "thank you", explanation: "'Thank you' ist die englische Entsprechung für 'Danke'." },
                    { question: "Wie sagt man 'Bitte' auf Englisch?", answer: "please", explanation: "'Please' bedeutet 'Bitte'." },
                    { question: "Wie antwortet man auf 'How are you?'", answer: "i am fine", explanation: "Eine typische Antwort ist 'I am fine' oder 'I'm good'." },
                    { question: "Wie fragt man nach dem Namen einer Person?", answer: "what is your name", explanation: "Die Frage 'What is your name?' bedeutet 'Wie heißt du?'." }
                ],
                writing: [
                    { question: "Wie schreibt man eine Begrüßung im Brief?", answer: "dear", explanation: "Eine übliche Begrüßung ist 'Dear [Name]'." },
                    { question: "Womit beginnt ein Satz auf Englisch?", answer: "capital letter", explanation: "Ein Satz beginnt mit einem Großbuchstaben (capital letter)." },
                    { question: "Wie beendet man einen Brief freundlich?", answer: "yours", explanation: "Man beendet oft mit 'Yours' oder 'Sincerely'." },
                    { question: "Was kommt nach 'My name is'?", answer: "name", explanation: "Nach 'My name is' kommt der eigene Name." },
                    { question: "Was ist ein Komma auf Englisch?", answer: "comma", explanation: "Komma ist 'comma'." },
                    { question: "Was ist ein Punkt am Satzende auf Englisch?", answer: "full stop", explanation: "Ein Punkt am Satzende heißt 'full stop' (BE) oder 'period' (AE)." }
                ]
            },
            science: {
                senses: [
                    { question: "Mit welchem Organ riechen wir?", answer: "nase", explanation: "Die Nase ist unser Riechorgan." },
                    { question: "Wie viele Sinne hat der Mensch?", answer: "5", explanation: "Der Mensch hat fünf Sinne: Sehen, Hören, Riechen, Schmecken, Tasten." },
                    { question: "Mit welchem Organ hören wir?", answer: "ohr", explanation: "Das Ohr ist unser Hörorgan." },
                    { question: "Mit welchem Organ sehen wir?", answer: "auge", explanation: "Das Auge ist unser Sehorgan." },
                    { question: "Mit welchem Organ schmecken wir?", answer: "zunge", explanation: "Die Zunge ist unser Geschmacksorgan." },
                    { question: "Welcher Sinn hilft uns, Dinge zu fühlen?", answer: "tastsinn", explanation: "Der Tastsinn ist die Wahrnehmung durch Berührung." }
                ],
                body: [
                    { question: "Wie viele Knochen hat ein erwachsener Mensch etwa?", answer: "206", explanation: "Ein erwachsener Mensch hat durchschnittlich 206 Knochen." },
                    { question: "Welches Organ pumpt das Blut durch den Körper?", answer: "herz", explanation: "Das Herz pumpt das Blut durch den Blutkreislauf." },
                    { question: "Womit atmen wir?", answer: "lunge", explanation: "Die Lunge ist unser Atmungsorgan." },
                    { question: "Welches Organ denkt?", answer: "gehirn", explanation: "Das Gehirn ist das Zentrum des Nervensystems und des Denkens." },
                    { question: "Wie viele Zähne hat ein Erwachsener?", answer: "32", explanation: "Ein erwachsener Mensch hat normalerweise 32 Zähne (inkl. Weisheitszähne)." },
                    { question: "Welches Organ ist für die Verdauung zuständig?", answer: "magen", explanation: "Der Magen ist ein zentrales Organ für die Verdauung." }
                ],
                animals: [
                    { question: "Welches Tier ist das größte Landtier?", answer: "elefant", explanation: "Der Afrikanische Elefant ist das größte Landtier." },
                    { question: "Welches Tier kann am schnellsten laufen?", answer: "gepard", explanation: "Der Gepard ist das schnellste Landtier." },
                    { question: "Welches Tier legt Eier und gibt Milch?", answer: "schnabeltier", explanation: "Das Schnabeltier ist eines der wenigen Säugetiere, die Eier legen." },
                    { question: "Wie nennt man Tiere, die nur Pflanzen fressen?", answer: "pflanzenfresser", explanation: "Pflanzenfresser werden auch Herbivoren genannt." },
                    { question: "Wie nennt man Tiere, die Fleisch fressen?", answer: "fleischfresser", explanation: "Fleischfresser werden auch Karnivoren genannt." },
                    { question: "Nenne ein Tier, das Winterschlaf hält.", answer: "igel", explanation: "Igel, Bären und Murmeltiere halten Winterschlaf." }
                ],
                plants: [
                    { question: "Was brauchen Pflanzen zum Wachsen?", answer: "licht", explanation: "Pflanzen benötigen Sonnenlicht für die Photosynthese." },
                    { question: "Wie nennt man den Vorgang, bei dem Pflanzen Sauerstoff produzieren?", answer: "photosynthese", explanation: "Pflanzen produzieren durch Photosynthese Sauerstoff und Zucker." },
                    { question: "Was nehmen Pflanzen durch die Wurzeln auf?", answer: "wasser", explanation: "Pflanzen nehmen Wasser und Nährstoffe durch die Wurzeln auf." },
                    { question: "Welcher Teil der Pflanze ist meist grün?", answer: "blätter", explanation: "Die Blätter sind oft grün durch das Chlorophyll." },
                    { question: "Was entsteht aus der Blüte einer Pflanze?", answer: "frucht", explanation: "Aus der Blüte entwickelt sich die Frucht (z.B. Apfel, Tomate)." },
                    { question: "Wie nennt man den Teil der Pflanze, der unter der Erde ist?", answer: "wurzel", explanation: "Die Wurzel verankert die Pflanze und nimmt Wasser auf." }
                ],
                electricity: [
                    { question: "Was braucht man für einen Stromkreis?", answer: "stromquelle", explanation: "Eine Stromquelle (z.B. Batterie) liefert die Energie." },
                    { question: "Woraus besteht ein elektrischer Leiter?", answer: "metall", explanation: "Metalle wie Kupfer sind gute elektrische Leiter." },
                    { question: "Was schützt uns vor Stromschlägen?", answer: "isolation", explanation: "Isolation (z.B. Plastik um Kabel) verhindert den Kontakt mit Strom." },
                    { question: "Was fließt in einem Stromkreis?", answer: "strom", explanation: "Elektrischer Strom fließt in einem geschlossenen Stromkreis." },
                    { question: "Nenne ein Gerät, das Strom braucht.", answer: "lampe", explanation: "Eine Lampe, ein Föhn oder ein Radio benötigen Strom." },
                    { question: "Was ist ein Kurzschluss?", answer: "direktverbindung", explanation: "Ein Kurzschluss ist eine unbeabsichtigte, niederohmige Verbindung in einem Stromkreis." }
                ],
                environment: [
                    { question: "Was ist ein Treibhauseffekt?", answer: "erwärmung", explanation: "Der Treibhauseffekt beschreibt die Erwärmung der Erdatmosphäre durch bestimmte Gase." },
                    { question: "Was schützt die Erde vor UV-Strahlung?", answer: "ozonschicht", explanation: "Die Ozonschicht in der Stratosphäre schützt vor schädlicher UV-Strahlung." },
                    { question: "Welche Energiequelle ist erneuerbar?", answer: "sonnenenergie", explanation: "Sonnenenergie, Windenergie und Wasserkraft sind erneuerbare Energiequellen." },
                    { question: "Was hilft, Müll zu reduzieren?", answer: "recycling", explanation: "Recycling ist ein wichtiger Schritt, um Müll zu reduzieren und Ressourcen zu schonen." },
                    { question: "Warum ist es wichtig, Wasser zu sparen?", answer: "ressource", explanation: "Wasser ist eine begrenzte und wertvolle Ressource für alle Lebewesen." },
                    { question: "Was passiert beim Kompostieren?", answer: "verrottung", explanation: "Beim Kompostieren werden organische Abfälle zu Humus zersetzt." }
                ]
            },
            geography: {
                directions: [
                    { question: "Was ist die entgegengesetzte Richtung von Norden?", answer: "süden", explanation: "Die vier Himmelsrichtungen sind Nord, Süd, Ost, West." },
                    { question: "In welcher Himmelsrichtung geht die Sonne auf?", answer: "osten", explanation: "Die Sonne geht im Osten auf und im Westen unter." },
                    { question: "Wie viele Himmelsrichtungen gibt es?", answer: "4", explanation: "Es gibt vier Haupt-Himmelsrichtungen." },
                    { question: "In welcher Himmelsrichtung liegt Deutschland von Frankreich aus gesehen?", answer: "osten", explanation: "Deutschland liegt östlich von Frankreich." },
                    { question: "Wenn du nach Norden gehst, wohin gehst du, wenn du dich umdrehst?", answer: "süden", explanation: "Wenn du dich umdrehst, gehst du in die entgegengesetzte Richtung." }
                ],
                continents: [
                    { question: "Wie viele Kontinente gibt es?", answer: "7", explanation: "Es gibt sieben Kontinente: Asien, Afrika, Nordamerika, Südamerika, Antarktis, Europa, Australien." },
                    { question: "Auf welchem Kontinent leben Pinguine (natürlich)?", answer: "antarktis", explanation: "Pinguine leben hauptsächlich in der Antarktis und auf südlichen Inseln." },
                    { question: "Welcher ist der größte Kontinent?", answer: "asien", explanation: "Asien ist der größte Kontinent sowohl nach Fläche als auch nach Bevölkerung." },
                    { question: "Welcher Kontinent ist bekannt für seine Kängurus?", answer: "australien", explanation: "Kängurus sind typische Tiere Australiens." },
                    { question: "Auf welchem Kontinent liegt Ägypten?", answer: "afrika", explanation: "Ägypten liegt im Nordosten Afrikas." },
                    { question: "Welcher Kontinent ist der kleinste?", answer: "australien", explanation: "Australien ist der kleinste Kontinent." }
                ],
                germany: [
                    { question: "Wie heißt die Hauptstadt von Deutschland?", answer: "berlin", explanation: "Berlin ist die Hauptstadt und größte Stadt Deutschlands." },
                    { question: "Wie viele Bundesländer hat Deutschland?", answer: "16", explanation: "Deutschland ist in 16 Bundesländer unterteilt." },
                    { question: "Welcher Fluss fließt durch Köln?", answer: "rhein", explanation: "Der Rhein ist einer der längsten Flüsse Europas und fließt durch Köln." },
                    { question: "Wie heißt das höchste Gebirge Deutschlands?", answer: "alpen", explanation: "Die Alpen (mit der Zugspitze als höchstem Gipfel) sind das höchste Gebirge in Deutschland." },
                    { question: "Wie nennt man die Nord- und Ostsee?", answer: "meere", explanation: "Nord- und Ostsee sind Randmeere des Atlantischen Ozeans." },
                    { question: "Welches Bundesland ist das größte flächenmäßig?", answer: "bayern", explanation: "Bayern ist das größte Bundesland Deutschlands nach Fläche." }
                ],
                maps: [
                    { question: "Was zeigt ein Maßstab auf einer Karte an?", answer: "verhältnis", explanation: "Der Maßstab gibt das Verhältnis zwischen der Entfernung auf der Karte und der tatsächlichen Entfernung an." },
                    { question: "Welche Farbe steht auf einer physischen Karte oft für Wasser?", answer: "blau", explanation: "Blau wird auf Karten häufig für Gewässer verwendet." },
                    { question: "Welche Farbe steht auf einer Karte oft für Berge?", answer: "braun", explanation: "Braun wird oft für Gebirge und Höhenlagen verwendet." },
                    { question: "Was sind Breiten- und Längengrade?", answer: "koordinaten", explanation: "Breiten- und Längengrade sind gedachte Linien, die zur Positionsbestimmung auf der Erde dienen." },
                    { question: "Was ist eine Legende auf einer Karte?", answer: "erklärung", explanation: "Die Legende (oder Zeichenerklärung) erklärt die auf der Karte verwendeten Symbole und Farben." },
                    { question: "Welche Art von Karte zeigt politische Grenzen?", answer: "politische karte", explanation: "Eine politische Karte zeigt Grenzen von Ländern, Bundesländern oder anderen administrativen Einheiten." }
                ],
                climate: [
                    { question: "Was ist der Unterschied zwischen Wetter und Klima?", answer: "zeitraum", explanation: "Wetter ist der kurzfristige Zustand der Atmosphäre, Klima ist der langfristige Durchschnitt des Wetters." },
                    { question: "Welche Klimazone ist sehr heiß und trocken?", answer: "wüste", explanation: "Wüstengebiete sind typischerweise sehr heiß und haben wenig Niederschlag." },
                    { question: "Was ist ein Monsun?", answer: "regenzeit", explanation: "Ein Monsun ist ein saisonaler Wind, der in bestimmten Regionen der Erde zu ausgeprägten Regen- und Trockenzeiten führt." },
                    { question: "Was ist globale Erwärmung?", answer: "temperaturanstieg", explanation: "Globale Erwärmung bezeichnet den Anstieg der durchschnittlichen Temperatur der Erdatmosphäre und der Ozeane." },
                    { question: "Welches Gas ist das wichtigste Treibhausgas?", answer: "co2", explanation: "Kohlendioxid (CO2) ist das wichtigste anthropogene Treibhausgas." },
                    { question: "Was ist der natürliche Treibhauseffekt?", answer: "natürliche erwärmung", explanation: "Der natürliche Treibhauseffekt sorgt dafür, dass die Erde eine bewohnbare Temperatur hat." }
                ],
                cities: [
                    { question: "Wie heißt die Hauptstadt von Frankreich?", answer: "paris", explanation: "Paris ist die Hauptstadt Frankreichs und eine Weltmetropole." },
                    { question: "Wie heißt die Hauptstadt von Italien?", answer: "rom", explanation: "Rom ist die Hauptstadt Italiens und auch als 'Ewige Stadt' bekannt." },
                    { question: "In welchem Land liegt die Stadt London?", answer: "england", explanation: "London ist die Hauptstadt Englands und des Vereinigten Königreichs." },
                    { question: "Welche Stadt ist bekannt für die Freiheitsstatue?", answer: "new york", explanation: "Die Freiheitsstatue ist ein Wahrzeichen von New York City in den USA." },
                    { question: "Wie heißt die Hauptstadt von Spanien?", answer: "madrid", explanation: "Madrid ist die Hauptstadt Spaniens und liegt im Zentrum des Landes." },
                    { question: "Welche deutsche Stadt ist bekannt für das Oktoberfest?", answer: "münchen", explanation: "München ist die Hauptstadt Bayerns und weltweit bekannt für das Oktoberfest." }
                ]
            },
            history: {
                timeline: [
                    { question: "Was bedeutet 'v. Chr.'?", answer: "vor christus", explanation: "v. Chr. steht für 'vor Christus' und bezieht sich auf die Zeit vor Christi Geburt." },
                    { question: "Was bedeutet 'n. Chr.'?", answer: "nach christus", explanation: "n. Chr. steht für 'nach Christus' und bezieht sich auf die Zeit nach Christi Geburt." },
                    { question: "Wie viele Jahre hat ein Jahrhundert?", answer: "100", explanation: "Ein Jahrhundert umfasst einen Zeitraum von 100 Jahren." },
                    { question: "Wie viele Jahre hat ein Jahrtausend?", answer: "1000", explanation: "Ein Jahrtausend umfasst einen Zeitraum von 1000 Jahren." },
                    { question: "Was ist eine Epoche?", answer: "zeitabschnitt", explanation: "Eine Epoche ist ein längerer, durch bestimmte Merkmale geprägter Zeitabschnitt der Geschichte." },
                    { question: "Was ist der Unterschied zwischen Geschichte und Vorgeschichte?", answer: "schrift", explanation: "Die Geschichte beginnt mit den ersten Schriftzeugnissen, die Vorgeschichte davor." }
                ],
                egypt: [
                    { question: "Wie heißt der berühmte Fluss in Ägypten?", answer: "nil", explanation: "Der Nil ist der längste Fluss Afrikas und prägte die altägyptische Kultur." },
                    { question: "Wer waren die Herrscher im Alten Ägypten?", answer: "pharaonen", explanation: "Pharaonen waren die Könige und religiösen Oberhäupter des Alten Ägypten." },
                    { question: "Was bauten die Ägypter für ihre Pharaonen?", answer: "pyramiden", explanation: "Die Pyramiden dienten als Grabstätten für die Pharaonen." },
                    { question: "Wie heißt die Schrift der alten Ägypter?", answer: "hieroglyphen", explanation: "Hieroglyphen sind die Bilderschrift der alten Ägypter." },
                    { question: "Wer war Tutanchamun?", answer: "pharao", explanation: "Tutanchamun war ein junger Pharao der 18. Dynastie." },
                    { question: "Was ist eine Mumie?", answer: "einbalsamierter körper", explanation: "Eine Mumie ist ein konservierter (einbalsamierter) Körper, um ihn für das Jenseits zu erhalten." }
                ],
                greece: [
                    { question: "Woher kommt die Idee der Demokratie?", answer: "griechenland", explanation: "Die Demokratie entstand im antiken Griechenland, insbesondere in Athen." },
                    { question: "Wer war der Hauptgott der Griechen?", answer: "zeus", explanation: "Zeus war der Vater der Götter und Menschen und Herrscher des Olymps." },
                    { question: "Wie hießen die griechischen Krieger aus Sparta?", answer: "spartaner", explanation: "Die Spartaner waren bekannt für ihre Disziplin und militärische Stärke." },
                    { question: "Welche Stadt war ein wichtiger Stadtstaat in Griechenland?", answer: "athen", explanation: "Athen war ein bedeutender Stadtstaat und Zentrum der Philosophie und Kultur." },
                    { question: "Was sind die Olympischen Spiele?", answer: "sportwettkämpfe", explanation: "Die Olympischen Spiele waren religiöse und sportliche Wettkämpfe zu Ehren der Götter." },
                    { question: "Wer war Alexander der Große?", answer: "feldherr", explanation: "Alexander der Große war ein makedonischer König und einer der größten Feldherren der Geschichte." }
                ],
                rome: [
                    { question: "Wer war der erste römische Kaiser?", answer: "augustus", explanation: "Augustus war der erste römische Kaiser und herrschte von 27 v. Chr. bis 14 n. Chr." },
                    { question: "Wie nennt man die römischen Soldaten?", answer: "legionäre", explanation: "Römische Soldaten wurden Legionäre genannt und waren Teil einer Legion." },
                    { question: "Was bauten die Römer für den Wassertransport?", answer: "aquädukte", explanation: "Aquädukte waren römische Wasserleitungen, oft als beeindruckende Bogenbrücken gebaut." },
                    { question: "Wo kämpften Gladiatoren?", answer: "kolosseum", explanation: "Gladiatoren kämpften im Kolosseum, einem riesigen Amphitheater in Rom." },
                    { question: "Wie nannte man die Herrscher im Römischen Reich vor den Kaisern?", answer: "konsuln", explanation: "In der Römischen Republik waren Konsuln die höchsten Staatsbeamten." },
                    { question: "Was war das Forum Romanum?", answer: "zentrum", explanation: "Das Forum Romanum war das politische, wirtschaftliche und religiöse Zentrum des antiken Roms." }
                ],
                medieval: [
                    { question: "Wer lebte in Burgen?", answer: "ritter", explanation: "Ritter und Adlige lebten in Burgen, die als Wohnsitz und Verteidigungsanlage dienten." },
                    { question: "Wie nannte man die Zeit nach dem Römischen Reich bis zur Neuzeit?", answer: "mittelalter", explanation: "Das Mittelalter ist der Zeitraum zwischen Antike und Neuzeit (ca. 500-1500 n. Chr.)." },
                    { question: "Was war eine wichtige Institution im Mittelalter?", answer: "kirche", explanation: "Die Kirche hatte im Mittelalter eine immense Macht und Einfluss." },
                    { question: "Wie nannte man die Bauern, die an das Land gebunden waren?", answer: "leibeigene", explanation: "Leibeigene Bauern waren nicht frei und an das Land ihres Herrn gebunden." },
                    { question: "Was war die Haupteinnahmequelle im Mittelalter?", answer: "landwirtschaft", explanation: "Die Landwirtschaft war die Grundlage der Wirtschaft im Mittelalter." },
                    { question: "Was ist ein Mönch?", answer: "religiöser mann", explanation: "Ein Mönch ist ein Mann, der in einem Kloster lebt und sich einem religiösen Leben widmet." }
                ],
                sources: [
                    { question: "Was sind Quellen in der Geschichte?", answer: "informationen", explanation: "Quellen sind alle Überreste oder Zeugnisse aus der Vergangenheit, die uns Informationen liefern." },
                    { question: "Nenne ein Beispiel für eine schriftliche Quelle.", answer: "buch", explanation: "Beispiele sind Bücher, Briefe, Urkunden, Zeitungen, Tagebücher." },
                    { question: "Nenne ein Beispiel für eine gegenständliche Quelle.", answer: "werkzeug", explanation: "Beispiele sind Werkzeuge, Münzen, Gebäude, Waffen, Kleidung." },
                    { question: "Warum sind Quellen wichtig für Historiker?", answer: "beweise", explanation: "Quellen sind die Basis der Geschichtsforschung, sie liefern Beweise und ermöglichen Rückschlüsse." },
                    { question: "Was ist eine Primärquelle?", answer: "originaldokument", explanation: "Eine Primärquelle ist ein Originaldokument oder Objekt aus der Zeit, die direkt von einem Ereignis zeugt." },
                    { question: "Was ist eine Sekundärquelle?", answer: "darstellung", explanation: "Eine Sekundärquelle ist eine Darstellung, Analyse oder Interpretation von Primärquellen (z.B. ein Geschichtsbuch, Artikel)." }
                ]
            }
        };


        // --- UI Hilfsfunktionen ---
        function showView(viewId) {
            // Alle Hauptansichten ausblenden
            document.getElementById('home-subjects-view').classList.add('hidden');
            document.getElementById('home-worksheets-view').classList.add('hidden');
            document.getElementById('subject-view').classList.add('hidden');
            document.getElementById('quiz-view').classList.add('hidden');
            document.getElementById('quiz-end-screen').classList.add('hidden'); // Immer ausblenden beim Wechsel der Hauptansicht

            // Gewünschte Ansicht einblenden
            document.getElementById(viewId).classList.remove('hidden');
            updateGlobalStats(); // Globale Statistiken immer aktualisieren
        }

        function updateGlobalStats() {
            // Gesamtpunkte und Streak aus localStorage laden und anzeigen
            document.getElementById('totalScore').textContent = localStorage.getItem('totalScore') || '0';
            document.getElementById('totalStreak').textContent = localStorage.getItem('totalStreak') || '0';
        }

        function playCelebration() {
            const celebrationEl = document.createElement('div');
            celebrationEl.classList.add('celebration');
            celebrationEl.textContent = '🎉';
            document.body.appendChild(celebrationEl);
            // Animation starten und Element nach Beendigung entfernen
            celebrationEl.addEventListener('animationend', () => {
                celebrationEl.remove();
            });
        }

        function animateStatUpdate(elementId, value) {
            const el = document.getElementById(elementId);
            const oldValue = parseInt(el.textContent);
            if (oldValue !== value) {
                el.textContent = value;
                el.classList.add('pulse'); // Pulse-Animation hinzufügen
                el.addEventListener('animationend', () => {
                    el.classList.remove('pulse'); // Animation nach Ende entfernen
                }, { once: true }); // Event Listener nur einmal ausführen
            }
        }

        // --- Navigation ---
        function showHomeView(type) {
            clearInterval(timer); // Timer stoppen, falls ein Quiz läuft
            gameActive = false; // Spielzustand zurücksetzen

            // Aktiven Navigationsbutton hervorheben
            document.getElementById('nav-subjects').classList.remove('active');
            document.getElementById('nav-worksheets').classList.remove('active');

            if (type === 'subjects') {
                showView('home-subjects-view');
                document.getElementById('nav-subjects').classList.add('active');
            } else if (type === 'worksheets') {
                generateWorksheetsList(); // Arbeitsblätter dynamisch generieren
                showView('home-worksheets-view');
                document.getElementById('nav-worksheets').classList.add('active');
            }
            currentSubject = null;
            currentTopic = null; // Aktuelles Thema zurücksetzen
        }

        function openSubject(subjectId) {
            currentSubject = subjects[subjectId];
            document.getElementById('subject-title').textContent = currentSubject.name;
            document.getElementById('subject-description').textContent = currentSubject.description;
            
            const topicsContainer = document.getElementById('topics-container');
            topicsContainer.innerHTML = ''; // Vorherige Themen entfernen

            // Themenkarten für das ausgewählte Fach erstellen
            currentSubject.topics.forEach(topic => {
                const topicCard = document.createElement('div');
                topicCard.classList.add('topic-card');
                topicCard.innerHTML = `
                    <h3>${topic.name}</h3>
                    <p>${topic.description}</p>
                    <button class="btn" onclick="openQuiz('${subjectId}', '${topic.id}')">Quiz starten</button>
                `;
                topicsContainer.appendChild(topicCard);
            });
            showView('subject-view');
        }

        function goToSubject() {
            clearInterval(timer);
            gameActive = false;
            showView('subject-view'); // Zurück zur Fach-Ansicht
            // Quiz-UI-Elemente auf Anfangszustand zurücksetzen
            document.getElementById('start-btn').classList.remove('hidden');
            document.getElementById('answer-input').classList.add('hidden');
            document.getElementById('submit-btn').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('feedback').classList.remove('show').classList.add('hidden'); // Feedback ausblenden
            document.getElementById('question-text').textContent = 'Bereit für deine erste Aufgabe?'; // Standardtext
            document.getElementById('quiz-end-screen').classList.add('hidden'); // End-Screen ausblenden
            document.getElementById('quiz-progress-text').classList.add('hidden'); // Fortschrittstext ausblenden
        }

        function openQuiz(subjectId, topicId) {
            currentSubject = subjects[subjectId];
            currentTopic = topicId;
            document.getElementById('quiz-title').textContent = `${currentSubject.name} - ${subjects[subjectId].topics.find(t => t.id === topicId).name}`;
            
            // Quiz-Zustand zurücksetzen
            score = 0;
            streak = 0;
            timeLeft = 60;
            gameActive = false;
            currentQuestion = null;
            questionIndex = 0;
            totalQuestionsAttempted = 0;
            correctAnswersCount = 0;
            clearInterval(timer);

            // Fragen für das Quiz vorbereiten (kopieren und mischen)
            // Sicherstellen, dass genügend Fragen vorhanden sind, sonst nur die vorhandenen nutzen
            const availableTopicQuestions = questions[subjectId][topicId] || [];
            questionsForQuiz = [...availableTopicQuestions].sort(() => Math.random() - 0.5);
            
            // UI-Elemente für den Start des Quiz vorbereiten
            document.getElementById('question-text').textContent = 'Klicke auf "Quiz starten", um loszulegen!';
            document.getElementById('answer-input').value = '';
            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('submit-btn').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('start-btn').classList.remove('hidden'); // Start-Button anzeigen
            document.getElementById('quiz-end-screen').classList.add('hidden'); // End-Screen verstecken
            document.getElementById('quiz-progress-text').classList.add('hidden'); // Fortschrittstext ausblenden

            updateQuizStats(); // Quiz-Statistiken zurücksetzen/anzeigen
            showView('quiz-view');
        }

        // --- Quiz Logik ---
        function startQuiz() {
            if (questionsForQuiz.length === 0) {
                document.getElementById('question-text').textContent = 'Keine Fragen für dieses Thema gefunden. Bitte wähle ein anderes Thema.';
                document.getElementById('start-btn').classList.add('hidden');
                document.getElementById('answer-input').classList.add('hidden');
                document.getElementById('submit-btn').classList.add('hidden');
                document.getElementById('next-btn').classList.add('hidden');
                document.getElementById('feedback').classList.remove('show').classList.add('hidden');
                document.getElementById('quiz-progress-text').classList.add('hidden');
                return;
            }

            // Initialisiere Werte für ein neues Quiz
            score = 0;
            streak = 0;
            timeLeft = 60;
            gameActive = true;
            questionIndex = 0;
            totalQuestionsAttempted = 0;
            correctAnswersCount = 0;
            
            // UI anpassen: Start-Button ausblenden, Eingabe und Prüf-Button anzeigen
            document.getElementById('start-btn').classList.add('hidden');
            document.getElementById('answer-input').classList.remove('hidden');
            document.getElementById('submit-btn').classList.remove('hidden');
            document.getElementById('quiz-end-screen').classList.add('hidden');
            document.getElementById('question-container').classList.remove('hidden'); // Frage anzeigen
            document.getElementById('quiz-progress-text').classList.remove('hidden'); // Fortschrittstext anzeigen

            startTimer(); // Timer starten
            loadQuestion(); // Erste Frage laden
        }

        function startTimer() {
            clearInterval(timer); // Vorherigen Timer löschen
            timer = setInterval(() => {
                timeLeft--;
                animateStatUpdate('time-left', timeLeft); // Zeit aktualisieren und pulsieren lassen
                if (timeLeft <= 0) {
                    endQuiz(); // Quiz beenden, wenn Zeit abgelaufen
                }
            }, 1000);
        }

        function loadQuestion() {
            document.getElementById('answer-input').value = ''; // Eingabefeld leeren
            document.getElementById('answer-input').focus(); // Fokus auf Eingabefeld
            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect'); // Feedback ausblenden und Klassen entfernen
            document.getElementById('submit-btn').classList.remove('hidden'); // Prüf-Button anzeigen
            document.getElementById('next-btn').classList.add('hidden'); // Nächste-Frage-Button ausblenden

            if (questionIndex >= questionsForQuiz.length) {
                // Wenn alle Fragen durch sind, Quiz beenden
                endQuiz();
                return;
            }

            currentQuestion = questionsForQuiz[questionIndex]; // Nächste Frage laden
            document.getElementById('question-text').textContent = currentQuestion.question;
            document.getElementById('quiz-progress-text').textContent = `Frage ${questionIndex + 1} von ${questionsForQuiz.length}`;
            totalQuestionsAttempted++; // Anzahl der gestellten Fragen erhöhen
        }

        function checkAnswer() {
            if (!gameActive) return; // Nur prüfen, wenn Quiz aktiv

            const userAnswer = document.getElementById('answer-input').value.trim().toLowerCase();
            const correctAnswer = currentQuestion.answer.toLowerCase();
            const feedbackElement = document.getElementById('feedback');

            if (userAnswer === correctAnswer) {
                feedbackElement.textContent = `Richtig! 🎉 ${currentQuestion.explanation || ''}`;
                feedbackElement.classList.remove('incorrect');
                feedbackElement.classList.add('correct', 'show'); // Feedback anzeigen
                score += 10; // Punkte erhöhen
                streak++; // Streak erhöhen
                correctAnswersCount++; // Richtige Antworten zählen
                playCelebration(); // Konfetti-Animation
            } else {
                feedbackElement.textContent = `Falsch. Die richtige Antwort ist: "${currentQuestion.answer}". ${currentQuestion.explanation || ''}`;
                feedbackElement.classList.remove('correct');
                feedbackElement.classList.add('incorrect', 'show'); // Feedback anzeigen
                streak = 0; // Streak zurücksetzen
            }

            document.getElementById('submit-btn').classList.add('hidden'); // Prüf-Button ausblenden
            document.getElementById('next-btn').classList.remove('hidden'); // Nächste-Frage-Button anzeigen
            
            // Aktuelle Quiz-Statistiken aktualisieren
            animateStatUpdate('current-score', score);
            animateStatUpdate('current-streak', streak);

            // Globale Statistiken im localStorage aktualisieren
            totalScore = parseInt(localStorage.getItem('totalScore') || '0');
            totalStreak = parseInt(localStorage.getItem('totalStreak') || '0');
            
            // Punkte zur Gesamtpunktzahl addieren
            if (userAnswer === correctAnswer) {
                totalScore += 10;
            }
            // Gesamt-Streak nur aktualisieren, wenn der aktuelle Streak höher ist
            if (streak > totalStreak) {
                totalStreak = streak;
            }
            localStorage.setItem('totalScore', totalScore);
            localStorage.setItem('totalStreak', totalStreak);
            updateGlobalStats(); // Anzeige der globalen Statistiken aktualisieren
        }

        function nextQuestion() {
            if (questionIndex + 1 < questionsForQuiz.length) {
                questionIndex++; // Zur nächsten Frage im Fragenpool wechseln
                loadQuestion(); // Nächste Frage laden
            } else {
                endQuiz(); // Quiz beenden, wenn keine weiteren Fragen mehr vorhanden sind
            }
        }

        function updateQuizStats() {
            // Anzeige der aktuellen Quiz-Statistiken
            document.getElementById('current-score').textContent = score;
            document.getElementById('current-streak').textContent = streak;
            document.getElementById('time-left').textContent = timeLeft;
        }

        function endQuiz() {
            gameActive = false;
            clearInterval(timer); // Timer stoppen

            // Quiz-UI ausblenden und End-Screen anzeigen
            document.getElementById('question-container').classList.add('hidden');
            document.getElementById('answer-input').classList.add('hidden');
            document.getElementById('submit-btn').classList.add('hidden');
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect'); // Alle Feedback-Klassen entfernen
            document.getElementById('quiz-progress-text').classList.add('hidden');

            document.getElementById('final-score').textContent = score;
            // Da totalQuestionsAttempted auch Fragen zählt, die nur angezeigt, aber nicht beantwortet wurden,
            // ist correctAnswersCount von questionsForQuiz.length aussagekräftiger für das Verhältnis.
            document.getElementById('final-correct-answers').textContent = correctAnswersCount;
            document.getElementById('final-total-questions').textContent = questionsForQuiz.length; // Gesamtfragen im Quiz

            document.getElementById('quiz-end-screen').classList.remove('hidden');
            
            updateGlobalStats(); // Sicherstellen, dass globale Stats aktuell sind
        }

        // --- Dynamische Generierung der Arbeitsblätter ---
        function generateWorksheetsList() {
            const container = document.getElementById('worksheets-list-container');
            container.innerHTML = ''; // Vorherige Arbeitsblätter entfernen

            if (availableWorksheets.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #718096;">Aktuell sind keine Arbeitsblätter verfügbar. Schau bald wieder vorbei!</p>';
                return;
            }

            availableWorksheets.forEach(worksheet => {
                const worksheetCard = document.createElement('div');
                worksheetCard.classList.add('worksheet-card');
                worksheetCard.innerHTML = `
                    <div class="worksheet-icon">📝</div>
                    <h3>${worksheet.title}</h3>
                    <p>${worksheet.description}</p>
                    <a href="${worksheet.fileName}" download="${worksheet.fileName}" class="btn">
                        Download PDF
                    </a>
                `;
                container.appendChild(worksheetCard);
            });
        }


        // Initialer Setup beim Laden der Seite
        document.addEventListener('DOMContentLoaded', () => {
            updateGlobalStats(); // Globale Statistiken beim Start laden
            showHomeView('subjects'); // Standardmäßig die Fächerübersicht anzeigen
            // generateWorksheetsList() wird jetzt nur aufgerufen, wenn man auf den Nav-Button klickt
        });

        // Event Listener für "Enter"-Taste im Antwortfeld
        document.getElementById('answer-input').addEventListener('keypress', function(event) {
            if (event.key === 'Enter' && gameActive) { // Nur reagieren, wenn Quiz aktiv ist
                if (!document.getElementById('submit-btn').classList.contains('hidden')) {
                    checkAnswer(); // Wenn "Prüfen"-Button sichtbar, Antwort prüfen
                } else if (!document.getElementById('next-btn').classList.contains('hidden')) {
                    nextQuestion(); // Wenn "Nächste Frage"-Button sichtbar, nächste Frage laden
                }
                event.preventDefault(); // Standardverhalten der Enter-Taste unterbinden (z.B. Formular absenden)
            }
        });
    </script>
</body>
</html>
